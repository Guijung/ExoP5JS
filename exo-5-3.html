<!DOCTYPE html>

<html lang="fr">
  <head>
    <meta charset="utf-8" />

    <title>exo3p5</title>

    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    />
  </head>

  <body>
    <div>
      <form>
        <fieldset>
          <legend>Inscription</legend>
          <div class="form-group">
            <label for="name">Nom:</label>

            <input
              oninput="checkNameRegex();"
              class="form-control"
              type="text"
              id="name"
              placeholder="Nom (20 caractères max)"
              required
            />

            <p id="nameCheck"></p>
          </div>

          <div class="form-group">
            <label for="mail">Mail</label>

            <input
              oninput="checkMailRegex();"
              class="form-control"
              type="email"
              id="mail"
              placeholder="e-mail"
              required
            />

            <p id="mailCheck"></p>
          </div>

          <div class="form-group">
            <label for="age">Âge:</label>

            <input
              oninput="checkAgeRegex();"
              class="form-control"
              type="number"
              id="age"
              placeholder="Âge"
              required
            />

            <p id="ageCheck"></p>
          </div>

          <button type="submit" class="btn btn-dark">Valider</button>
        </fieldset>
      </form>
    </div>

    <script>
      function checkNameRegex() {
        var nameRegex = new RegExp("^[a-zA-Z0-9-]{2,20}$");

        var name = document.getElementById("name").value;

        if (nameRegex.test(name)) {
          document.getElementById("nameCheck").style.color = "green";

          document.getElementById("nameCheck").innerHTML = "saisie valide";
        } else {
          document.getElementById("nameCheck").style.color = "red";

          document.getElementById("nameCheck").innerHTML = "saisie non valide";
        }
      }

      function checkAgeRegex() {
        var ageRegex = new RegExp("^\\d{1,3}$");

        var age = document.getElementById("age").value;

        if (ageRegex.test(age)) {
          document.getElementById("ageCheck").style.color = "green";

          document.getElementById("ageCheck").innerHTML = "Âge valide";
        } else {
          document.getElementById("ageCheck").style.color = "red";

          document.getElementById("ageCheck").innerHTML = "Âge non valide";
        }
      }

      function checkMailRegex() {
        var mailRegex = new RegExp(
          "^[a-zA-Z0-9._-]+@[a-z0-9._-]{2,}\.[a-z]{2,4}$"
        );

        var mail = document.getElementById("mail").value;

        if (mailRegex.test(mail)) {
          document.getElementById("mailCheck").style.color = "green";

          document.getElementById("mailCheck").innerHTML = "Nom valide";
        } else {
          document.getElementById("mailCheck").style.color = "red";

          document.getElementById("mailCheck").innerHTML = "Nom non valide";
        }
      }
    </script>
  </body>
</html>
